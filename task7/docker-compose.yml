version: '2'
services:
  builder:
    build:
      context: builder/
      args:
        - BUILD_PATH
        - BUILD_OUT
        - DEST_PATH
    volumes:
      - ./artifacts:${DEST_PATH}/${BUILD_OUT}
    networks:
      - task7

  deployer:
    image: tomcat:latest
    ports:
      - "8080:8080"
    volumes:
      - ./artifacts:/usr/local/tomcat/webapps/
    networks:
      - task7
    depends_on:
      - builder

networks:
  task7:
    driver: bridge
